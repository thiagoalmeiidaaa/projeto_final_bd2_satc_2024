DELIMITER //

CREATE TRIGGER registrar_historico_login
AFTER INSERT ON historico_login
FOR EACH ROW
BEGIN
    DECLARE nome_cliente VARCHAR(100);
    
    -- Obter o nome do cliente
    SELECT nome INTO nome_cliente
    FROM clientes
    WHERE id_cliente = NEW.id_cliente;
    
    -- Registrar o evento
    INSERT INTO log_eventos (evento)
    VALUES (CONCAT('Cliente ', nome_cliente, ' realizou login em ', NEW.data_hora_login));
END//

DELIMITER ;


--

DELIMITER //

CREATE TRIGGER registrar_modificacao_historico_login
AFTER INSERT ON historico_login
FOR EACH ROW
BEGIN
    DECLARE acao VARCHAR(100);
    
    -- Registrar o evento de login
    SET acao = CONCAT('Cliente ', NEW.id_cliente, ' realizou login em ', NEW.data_hora_login);
    INSERT INTO log_modificacoes (tabela, coluna_afetada, acao, data_hora)
    VALUES ('historico_login', NULL, acao, NOW());
    
END//

DELIMITER ;
